<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Danh s√°ch ng∆∞·ªùi d√πng</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-5">
<h2 class="mb-4">Danh s√°ch Ng∆∞·ªùi D√πng</h2>
<a href="/user-form" class="btn btn-success mb-3">+ Th√™m Ng∆∞·ªùi D√πng</a>
<table class="table table-bordered table-hover align-middle">
    <thead class="table-light">
    <tr>
        <th>ID</th>
        <th>H·ªç v√† t√™n</th>
        <th>Email</th>
        <th>Tu·ªïi</th>
        <th class="text-center">H√†nh ƒë·ªông</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="user : ${users}">
        <td th:text="${user.id}"></td>
        <td th:text="${user.name}"></td>
        <td th:text="${user.email}"></td>
        <td th:text="${user.age}"></td>
        <td class="text-center">
            <a th:href="@{'/edit-user/' + ${user.id}}" class="btn btn-primary btn-sm">‚úè S·ª≠a</a>
            <button type="button"
                    class="btn btn-danger btn-sm"
                    th:attr="data-id=${user.id}"
                    onclick="confirmDelete(this)">üóë X√≥a</button>
        </td>
    </tr>
    </tbody>
</table>

<!-- Modal x√°c nh·∫≠n -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title">X√°c nh·∫≠n x√≥a</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="ƒê√≥ng"></button>
            </div>
            <div class="modal-body">
                B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a ng∆∞·ªùi d√πng n√†y kh√¥ng?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button>
                <a id="confirmDeleteBtn" href="#" class="btn btn-danger">X√≥a</a>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
    function confirmDelete(button) {
        let userId = button.getAttribute("data-id");
        let deleteUrl = "/delete-user/" + userId;
        document.getElementById("confirmDeleteBtn").setAttribute("href", deleteUrl);

        let modal = new bootstrap.Modal(document.getElementById('deleteModal'));
        modal.show();
    }
</script>
</body>
</html>
